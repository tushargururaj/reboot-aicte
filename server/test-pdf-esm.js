
import { extractTextFromPDF } from './services/ocrService.js';
import fs from 'fs';

// Minimal valid PDF binary
const minimalPdf = Buffer.from(
    '255044462d312e370a25e2e3cfd30a312030206f626a0a3c3c2f547970652f436174616c6f672f50616765732032203020523e3e0a656e646f626a0a322030206f626a0a3c3c2f547970652f50616765732f4b6964735b33203020525d2f436f756e7420313e3e0a656e646f626a0a332030206f626a0a3c3c2f547970652f506167652f506172656e742032203020522f5265736f75726365733c3c2f466f6e743c3c2f46312034203020523e3e3e3e2f4d65646961426f785b30203020363132203739325d2f436f6e74656e74732035203020523e3e0a656e646f626a0a342030206f626a0a3c3c2f547970652f466f6e742f537562747970652f54797065312f42617365466f6e742f48656c7665746963613e3e0a656e646f626a0a352030206f626a0a3c3c2f4c656e6774682034343e3e0a73747265616d0a42540a2f46312032342054660a313030203730302054640a2845534d20496d706f727420576f726b732920546a0a45540a656e6473747265616d0a656e646f626a0a787265660a3020360a3030303030303030303020363533352066200a30303030303030303130203030303030206e200a30303030303030303630203030303030206e200a30303030303030313137203030303030206e200a30303030303030323236203030303030206e200a30303030303030333134203030303030206e200a747261696c65720a3c3c2f53697a6520362f526f6f742031203020523e3e0a7374617274787265660a3430380a2525454f460a',
    'hex'
);

const dummyPdfPath = 'esm_test.pdf';
fs.writeFileSync(dummyPdfPath, minimalPdf);

async function test() {
    try {
        console.log('Testing ESM PDF processing...');
        const result = await extractTextFromPDF(dummyPdfPath);
        console.log('Result:', result);
    } catch (e) {
        console.error('CRITICAL ERROR:', e);
    }
}

test();
